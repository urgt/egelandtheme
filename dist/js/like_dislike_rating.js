jQuery(document).ready(function(a){a(".post__item-rating").each(function(){var t=a(this),i=t.data("post-id");a.ajax({url:LDR.ajax_url,type:"POST",dataType:"json",data:{action:"get_rating",post_id:i},success:function(n){n.success&&(t.find(".rating_value").text(n.data.rating),o(t.find(".rating_value"),n.data.rating))}})}),a(".post__item-rating button").on("click",function(){var t=a(this).closest(".post__item-rating"),i=t.data("post-id"),n=a(this).data("vote");a.ajax({url:LDR.ajax_url,type:"POST",dataType:"json",data:{action:"update_rating",post_id:i,vote:n,nonce:LDR.nonce},success:function(s){if(s.success){var c=s.data.rating;t.find(".rating_value").text(c),o(t.find(".rating_value"),c)}}})});function o(t,i){i>0?t.css("color","green"):i<0?t.css("color","red"):t.css("color","")}});
